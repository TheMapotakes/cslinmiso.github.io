<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>LINE_API | Trey&#39;s Whispering</title>
  <meta name="author" content="Trey Lin">
  
  <meta name="description" content="LineAPI4J，是利用thrift來連接LINE的API界面，可以透過本API登入LINE帳號並傳送訊息，搜尋並加入好友或者傳送貼圖。
更棒的是，可以用來製作自動回話的機器人(Bot)。
近期更新了幾個重要功能：傳送檔案，圖片。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="LINE_API"/>
  <meta property="og:site_name" content="Trey&#39;s Whispering"/>

  
    <meta property="og:image" content="undefined"/>
  


  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="alternate" href="/atom.xml" title="Trey&#39;s Whispering" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-53783277-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    //ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Trey&#39;s Whispering</a></h1>
  <h2 class="subtitle">Life&#39;s too short for you to give in. So fight, you fight for what&#39;s yours.</h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
      <li><a href="/atom.xml">RSS</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-11-26T14:56:41.000Z"><a href="/2014/11/26/LINE-API/">2014 Nov 26</a></time>
      
      
  
    <h1 class="title">LINE_API</h1>
  

    </header>
    <div class="entry">
      
        <p>LineAPI4J，是利用thrift來連接LINE的API界面，可以透過本API登入LINE帳號並傳送訊息，搜尋並加入好友或者傳送貼圖。</p>
<p>更棒的是，可以用來製作自動回話的機器人(Bot)。</p>
<p>近期更新了幾個重要功能：傳送檔案，圖片。</p>
<a id="more"></a>
<p><strong>基於LINE Corporation的安全考量，不提供所有關於登入的實作。也請不要問我怎麼登入。</strong></p>
<h1 id="LineAPI4J"><a href="#LineAPI4J" class="headerlink" title="LineAPI4J "></a>LineAPI4J </h1><p><em>March 28th, 2016</em> <code>Now, you can keep the log session alive, doesn&#39;t have to repeat entering pincode.</code></p>
<p><em>LineAPI4J</em> is a library written in Java with compressed thrift client.</p>
<p>You might wonder what do you need it, when you already have LINE client installed on your PC/MAC/Mobile devices.</p>
<p><em>LineAPI4J</em> allows you to build your own line bot, and you’re able to <code>send messages, stickers, files and images</code> with it.</p>
<p>Inspired by <a href="https://github.com/carpedm20/line" target="_blank" rel="noopener">LINE</a>, LINE API written in Python by <a href="https://github.com/carpedm20" target="_blank" rel="noopener">carpedm20</a>.</p>
<p>Major part of structure of this implementation is from <a href="https://github.com/carpedm20/line" target="_blank" rel="noopener">LINE</a>, all the credits goes to him :)</p>
<h3 id="How-to-build"><a href="#How-to-build" class="headerlink" title="How to build"></a>How to build</h3><pre><code>mvn package
</code></pre><h3 id="Using-LINE-API"><a href="#Using-LINE-API" class="headerlink" title="Using LINE API"></a>Using LINE API</h3><p>Basic process as following code.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git://github.com/cslinmiso/LineAPI4J.git</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">    LineApi api = new LineApiImpl();</span><br><span class="line">      try &#123;</span><br><span class="line">        LoginResult result = api.login(&quot;xxxx@xxx.com&quot;, &quot;xxxxxxx&quot;); // login</span><br><span class="line">        LineClient client = new LineClient(api); //init client</span><br><span class="line">        LineContact someoneContact = client.getContactByName(&quot;Someone&quot;); // find contact</span><br><span class="line">        System.out.println(someoneContact.sendSticker(&quot;13&quot;, &quot;1&quot;, &quot;100&quot;, &quot;&quot;));</span><br><span class="line">        System.out.println(someoneContact.sendMessage(&quot;:) test&quot;));</span><br><span class="line">      &#125; catch (java.net.SocketTimeoutException e) &#123;</span><br><span class="line">        // setAwaitforVerify false</span><br><span class="line">      &#125; catch (Exception e) &#123;</span><br><span class="line">        // TODO Auto-generated catch block</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<p>Once you have LineContact, you can start from there. Check <code>LineContact</code> for more information.</p>
<p>see example App.java in io.cslinmiso.line.LineAPI4J</p>
<h3 id="CoreMethods"><a href="#CoreMethods" class="headerlink" title="CoreMethods"></a>CoreMethods</h3><p><strong>LineContact.sendMessage(String text)</strong></p>
<p><strong>LineContact.sendFile()</strong></p>
<p>Parameter: Local Path, File </p>
<pre><code>// sending local file
    File file = new File(&quot;/Users/treylin/Downloads/file.zip&quot;);
    someoneContact.sendFile(file);
    // With Path        
    someoneContact.sendFile(&quot;/Users/treylin/Downloads/file.zip&quot;);
</code></pre><p><strong>LineContact.sendImage()</strong></p>
<p>Parameter: Local Path, File, InputStream</p>
<pre><code>// Sending image by local image path
someoneContact.sendImage(&quot;/Users/treylin/Downloads/yajpg&quot;);

// Sending image by file
File file = new File(&quot;/Users/treylin/Downloads/yan.jpg&quot;);
someoneContact.sendImage(file);

// Sending image by inputstream
InputStream is = new FileInputStream(file);
someoneContact.sendImage(is);
</code></pre><p><strong>LineContact.sendImageWithUrl()</strong></p>
<p>Parameter: URL</p>
<pre><code>someoneContact.sendImageWithURL(&quot;https://goo.gl/qXdQrf&quot;);
</code></pre><p><strong>LineContact.sendFileWithUrl()</strong></p>
<p>Parameter: URL</p>
<pre><code>someoneContact.sendFileWithURL(&quot;https://goo.gl/qXdQrf&quot;);
</code></pre><ul>
<li><em>TODO fix some problems</em></li>
<li><em>TODO update usage of api</em></li>
</ul>
<h1 id="ScreenShot"><a href="#ScreenShot" class="headerlink" title="ScreenShot"></a>ScreenShot</h1><p><img src="http://cslinmiso.github.io/img/LineAPI4J/LineAPI4J.png" alt="List of contacts."></p>
<h1 id="License"><a href="#License" class="headerlink" title="License"></a>License</h1><p>This project is under <a href="http://www.opensource.org/licenses/mit-license.php" target="_blank" rel="noopener">MIT license</a>.</p>
<p>**<br>The MIT License (MIT)</p>
<p>Copyright (c) 2014-2016 Trey Lin</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy<br>of this software and associated documentation files (the “Software”), to deal<br>in the Software without restriction, including without limitation the rights<br>to use, copy, modify, merge, publish, distribute, sublicense, and/or sell<br>copies of the Software, and to permit persons to whom the Software is<br>furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all<br>copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE<br>AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,<br>OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE<br>SOFTWARE.<br>**</p>
<h1 id="Author"><a href="#Author" class="headerlink" title="Author"></a>Author</h1><p>###Trey Lin / cslinmiso</p>
<p><a href="http://cslinmiso.github.io/">My Site</a></p>
<p><a href="https://twitter.com/cslinmiso" target="_blank" rel="noopener">@cslinmiso</a></p>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/LINE/">LINE</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/LINE/">LINE</a>
  </div>

        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜尋">
    <input type="hidden" name="q" value="site:cslinmiso.github.io">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分類</h3>
  <ul class="entry">
  
    <li><a href="/categories/Android/">Android</a><small>1</small></li>
  
    <li><a href="/categories/CI/">CI</a><small>1</small></li>
  
    <li><a href="/categories/Cloud/">Cloud</a><small>1</small></li>
  
    <li><a href="/categories/DB/">DB</a><small>1</small></li>
  
    <li><a href="/categories/Heroku/">Heroku</a><small>1</small></li>
  
    <li><a href="/categories/Java/">Java</a><small>2</small></li>
  
    <li><a href="/categories/LINE/">LINE</a><small>3</small></li>
  
    <li><a href="/categories/Life/">Life</a><small>1</small></li>
  
    <li><a href="/categories/Loopback/">Loopback</a><small>1</small></li>
  
    <li><a href="/categories/Node-js/">Node.js</a><small>1</small></li>
  
    <li><a href="/categories/PC/">PC</a><small>1</small></li>
  
    <li><a href="/categories/Travel/">Travel</a><small>1</small></li>
  
    <li><a href="/categories/Vue/">Vue</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2018/02/23/WD-MyBook-8TB-As-Internal-Drive/">WD My Book 8TB as Internal Drive</a>
      </li>
    
      <li>
        <a href="/2017/10/20/Albothyl/">安可治濃縮液(Albothyl)</a>
      </li>
    
      <li>
        <a href="/2017/04/12/You2Pick-Youtube-Comment-Picker/">You2Pick-Youtube-Comment-Picker</a>
      </li>
    
      <li>
        <a href="/2016/08/16/Loopback-Vue-boilerplate/">Loopback-Vue-Boilerplate </a>
      </li>
    
      <li>
        <a href="/2016/07/25/使用Codeship自動部署OpenShift/">使用Codeship自動部署OpenShift</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">標籤</h3>
  <ul class="entry">
  
    <li><a href="/tags/8T/">8T</a><small>1</small></li>
  
    <li><a href="/tags/Albothyl/">Albothyl</a><small>1</small></li>
  
    <li><a href="/tags/Android/">Android</a><small>1</small></li>
  
    <li><a href="/tags/CI/">CI</a><small>1</small></li>
  
    <li><a href="/tags/Cloud/">Cloud</a><small>2</small></li>
  
    <li><a href="/tags/CloudBees/">CloudBees</a><small>2</small></li>
  
    <li><a href="/tags/Codeship/">Codeship</a><small>1</small></li>
  
    <li><a href="/tags/DB/">DB</a><small>1</small></li>
  
    <li><a href="/tags/GIT/">GIT</a><small>1</small></li>
  
    <li><a href="/tags/Google-Contact-Sync/">Google Contact Sync</a><small>1</small></li>
  
    <li><a href="/tags/Heroku/">Heroku</a><small>1</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>2</small></li>
  
    <li><a href="/tags/Javascript/">Javascript</a><small>2</small></li>
  
    <li><a href="/tags/JetStar/">JetStar</a><small>1</small></li>
  
    <li><a href="/tags/LINE/">LINE</a><small>3</small></li>
  
    <li><a href="/tags/Loopback/">Loopback</a><small>1</small></li>
  
    <li><a href="/tags/Lucene/">Lucene</a><small>1</small></li>
  
    <li><a href="/tags/MI5/">MI5</a><small>1</small></li>
  
    <li><a href="/tags/MIUI/">MIUI</a><small>1</small></li>
  
    <li><a href="/tags/Node-js/">Node.js</a><small>3</small></li>
  
    <li><a href="/tags/OpenShift/">OpenShift</a><small>1</small></li>
  
    <li><a href="/tags/Osaka/">Osaka</a><small>1</small></li>
  
    <li><a href="/tags/PC/">PC</a><small>1</small></li>
  
    <li><a href="/tags/Paoding/">Paoding</a><small>1</small></li>
  
    <li><a href="/tags/Play-Framework/">Play Framework</a><small>2</small></li>
  
    <li><a href="/tags/Travel/">Travel</a><small>1</small></li>
  
    <li><a href="/tags/Vue/">Vue</a><small>2</small></li>
  
    <li><a href="/tags/WD/">WD</a><small>1</small></li>
  
    <li><a href="/tags/Webpack/">Webpack</a><small>1</small></li>
  
    <li><a href="/tags/Youtube/">Youtube</a><small>1</small></li>
  
    <li><a href="/tags/db4free/">db4free</a><small>1</small></li>
  
    <li><a href="/tags/harddrive/">harddrive</a><small>1</small></li>
  
    <li><a href="/tags/安可治/">安可治</a><small>1</small></li>
  
    <li><a href="/tags/小米5/">小米5</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">標籤雲</h3>
  <div class="entry">
    <a href="/tags/8T/" style="font-size: 10px;">8T</a> <a href="/tags/Albothyl/" style="font-size: 10px;">Albothyl</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/CI/" style="font-size: 10px;">CI</a> <a href="/tags/Cloud/" style="font-size: 15px;">Cloud</a> <a href="/tags/CloudBees/" style="font-size: 15px;">CloudBees</a> <a href="/tags/Codeship/" style="font-size: 10px;">Codeship</a> <a href="/tags/DB/" style="font-size: 10px;">DB</a> <a href="/tags/GIT/" style="font-size: 10px;">GIT</a> <a href="/tags/Google-Contact-Sync/" style="font-size: 10px;">Google Contact Sync</a> <a href="/tags/Heroku/" style="font-size: 10px;">Heroku</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Javascript/" style="font-size: 15px;">Javascript</a> <a href="/tags/JetStar/" style="font-size: 10px;">JetStar</a> <a href="/tags/LINE/" style="font-size: 20px;">LINE</a> <a href="/tags/Loopback/" style="font-size: 10px;">Loopback</a> <a href="/tags/Lucene/" style="font-size: 10px;">Lucene</a> <a href="/tags/MI5/" style="font-size: 10px;">MI5</a> <a href="/tags/MIUI/" style="font-size: 10px;">MIUI</a> <a href="/tags/Node-js/" style="font-size: 20px;">Node.js</a> <a href="/tags/OpenShift/" style="font-size: 10px;">OpenShift</a> <a href="/tags/Osaka/" style="font-size: 10px;">Osaka</a> <a href="/tags/PC/" style="font-size: 10px;">PC</a> <a href="/tags/Paoding/" style="font-size: 10px;">Paoding</a> <a href="/tags/Play-Framework/" style="font-size: 15px;">Play Framework</a> <a href="/tags/Travel/" style="font-size: 10px;">Travel</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/WD/" style="font-size: 10px;">WD</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/Youtube/" style="font-size: 10px;">Youtube</a> <a href="/tags/db4free/" style="font-size: 10px;">db4free</a> <a href="/tags/harddrive/" style="font-size: 10px;">harddrive</a> <a href="/tags/安可治/" style="font-size: 10px;">安可治</a> <a href="/tags/小米5/" style="font-size: 10px;">小米5</a>
  </div>
</div>


  <div class="widget recent_comments">
    <h3 class="title">最近評論</h3>
    <script type="text/javascript" src="http://cslinmiso.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=32&amp;excerpt_length=200&amp;hide_mods=0"></script>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2018 Trey Lin
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'cslinmiso';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>